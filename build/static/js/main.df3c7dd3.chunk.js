(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{132:function(e,t,a){},134:function(e,t,a){},136:function(e,t,a){},140:function(e,t,a){"use strict";a.r(t);var n=a(59),r=a(1),l=a.n(r),o=a(10),i=a.n(o),c=(a(66),a(5)),s=a(6),u=a(9),p=a(7),m=a(8),h=(a(68),a(69),a(11)),f=a(13),d=a(3),v=function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props.intl.messages;return l.a.createElement(d.c,{className:"mt-2 mx-2"},l.a.createElement(d.e,null,e["filter_panel.title"]),l.a.createElement(d.d,null,this.props.children))}}]),t}(l.a.Component),g=Object(f.c)(v),b=a(47),O=function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return l.a.createElement(d.c,{className:"mx-1 my-1"},l.a.createElement(d.f,{top:!0,width:"100%",src:this.props.photo.src}),l.a.createElement(d.d,null,l.a.createElement(d.g,null,this.props.photo.albumName)))}}]),t}(l.a.Component),y=a(23),E=a(18),j=function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props.playlists,t=this.props.intl.messages;return l.a.createElement("div",null,e&&e.length>0?l.a.createElement(b.a,{photos:e,ImageComponent:O}):l.a.createElement(d.a,{color:"secondary",className:"mx-5 mt-5"},l.a.createElement(E.a,{icon:y.faInfoCircle})," ",t["playlist_result.empty"]))}}]),t}(l.a.Component),k=Object(f.c)(j),S=[{value:"en_AU",name:"en_AU"},{value:"de_DE",name:"de_DE "},{value:"pt_BR",name:"pt_BR"},{value:"fr_FR",name:"fr_FR"},{value:"en_US",name:"en_US"},{value:"es_AR",name:"es_AR"}],_=[{value:"AU",name:"Australia"},{value:"DE",name:"Alemanh\xe3"},{value:"BR",name:"Brasil"},{value:"PT",name:"Portugal"},{value:"en_US",name:"EUA"},{value:"RU",name:"R\xfassia"}],C=a(49);function N(e){return l.a.createElement(d.r,{color:"primary",dark:!0,expand:"md"},l.a.createElement(d.s,{href:"#"},"Spotifood"),l.a.createElement(d.o,{className:"ml-auto",navbar:!0},l.a.createElement(d.p,null,l.a.createElement(d.q,{href:"https://github.com/hashiCode/ifood-frontend-test"},l.a.createElement(E.a,{icon:C.faGithub,size:"lg"})))))}var w=a(60),x=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(u.a)(this,Object(p.a)(t).call(this,e))).state={value:void 0},a.onChangeValue=a.onChangeValue.bind(Object(h.a)(Object(h.a)(a))),a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"getOptionLabel",value:function(e){return e.name}},{key:"getOptionValue",value:function(e){return e.value}},{key:"onChangeValue",value:function(e){var t=e?e.value:null;this.setState({value:t}),this.props.onChange(t)}},{key:"render",value:function(){return l.a.createElement(w.a,{getOptionLabel:this.getOptionLabel,getOptionValue:this.getOptionValue,options:this.props.options,isMulti:!1,placeholder:this.props.placeholder,onChange:this.onChangeValue,value:this.props.value,isClearable:!0})}}]),t}(l.a.Component),P=a(53),T=a.n(P),J=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(u.a)(this,Object(p.a)(t).call(this,e))).state={value:""},a.onChange=a.onChange.bind(Object(h.a)(Object(h.a)(a))),a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"onChange",value:function(e){var t=e.target.value;(!t||this.props.min&&t<this.props.min||this.props.max&&t>this.props.max)&&(t=""),this.setState({value:t}),t?this.props.onChange(t):this.props.onChange(void 0)}},{key:"render",value:function(){return l.a.createElement(d.j,{type:"number",placeholder:this.props.placeholder,min:this.props.min,max:this.props.max,onChange:this.onChange,value:this.state.value})}}]),t}(l.a.Component),I=(a(106),a(26),a(54)),R=a.n(I),U=a(20),A=a.n(U),B=new(function(){function e(){Object(c.a)(this,e)}return Object(s.a)(e,[{key:"getPlaylists",value:function(e,t){var a=this.buildQueryParameters(e);return R.a.get("https://api.spotify.com/v1/browse/featured-playlists?".concat(a),{headers:{Authorization:"Bearer ".concat(t)}}).then(function(e){return e.data})}},{key:"buildQueryParameters",value:function(e){return console.log(A.a.stringify(e)),A.a.stringify(e)}}]),e}()),M=a(55),z=a.n(M),D=new(function(){function e(){Object(c.a)(this,e),this.tokenKey="auth_token"}return Object(s.a)(e,[{key:"storeToken",value:function(e){localStorage.setItem(this.tokenKey,e)}},{key:"getToken",value:function(){return localStorage.getItem(this.tokenKey)}},{key:"removeToken",value:function(){localStorage.removeItem(this.tokenKey)}}]),e}());a(132);function L(){return l.a.createElement("div",{className:"pageSpinner"},l.a.createElement(E.a,{className:"pageSpinnerIcon",icon:y.faSpinner,size:"3x",spin:!0}))}a(134);var V=function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props.intl.messages;return l.a.createElement(d.l,{isOpen:!0},l.a.createElement(d.n,{className:"error-modal-header"},e["error_modal.title"]),l.a.createElement(d.m,null,this.props.errorMSG))}}]),t}(l.a.Component),K=Object(f.c)(V),Y=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(u.a)(this,Object(p.a)(t).call(this,e))).state={searchJSON:{locale:void 0,country:void 0,timestamp:void 0,limit:void 0,offset:void 0},playlists:void 0,loading:!1,validToken:!0,errorModal:void 0},a.updateSearchJSON=a.updateSearchJSON.bind(Object(h.a)(Object(h.a)(a))),a.fecthPlaylists=a.fecthPlaylists.bind(Object(h.a)(Object(h.a)(a))),a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=this;window.history.pushState(null,"","/"),this.refreshPlaylists=setInterval(function(){return e.fecthPlaylists()},3e4),this.fecthPlaylists()}},{key:"componentWillUnmount",value:function(){clearInterval(this.refreshPlaylists),D.removeToken()}},{key:"updateSearchJSON",value:function(e,t){var a=this.state.searchJSON;a[e]=t,this.setState({searchJSON:a}),console.log(this.state.searchJSON),this.fecthPlaylists()}},{key:"createErrorModal",value:function(e){var t=this.props.intl.messages;return l.a.createElement(K,{errorMSG:t[e]})}},{key:"fecthPlaylists",value:function(){var e=this,t=D.getToken();if(t&&this.state.validToken)this.setState({loading:!0}),B.getPlaylists(this.state.searchJSON,t).then(function(t){var a=t.playlists;if(a&&a.items){var n=e.processPlaylist(a.items);e.setState({playlists:n,loading:!1})}}).catch(function(t){var a=e.createErrorModal("error_modal.errorRequest");e.setState({loading:!1,validToken:!1,errorModal:a}),clearInterval(e.refreshPlaylists)});else{var a=this.createErrorModal("error_modal.expireToken");this.setState({validToken:!1,errorModal:a}),clearInterval(this.refreshPlaylists)}}},{key:"processPlaylist",value:function(e){var t=[];return z.a.forEach(e,function(e){t.push({src:e.images[0].url,albumName:e.name,width:300,height:300})}),t}},{key:"render",value:function(){var e=this,t=this.props.intl.messages;return l.a.createElement("div",null,l.a.createElement(N,null),l.a.createElement(d.i,{fluid:!0},l.a.createElement(d.t,null,l.a.createElement(d.h,null,l.a.createElement(g,null,l.a.createElement(d.i,null,l.a.createElement(d.t,null,l.a.createElement(d.h,null,l.a.createElement(x,{placeholder:t["filter_panel.filter.locale"],options:S,onChange:function(t){return e.updateSearchJSON("locale",t)}})),l.a.createElement(d.h,null,l.a.createElement(x,{placeholder:t["filter_panel.filter.country"],options:_,onChange:function(t){return e.updateSearchJSON("country",t)}})),l.a.createElement(d.h,null,l.a.createElement(T.a,{placeholder:t["filter_panel.filter.data"],inputProps:{placeholder:t["filter_panel.filter.date"]},onChange:function(t){return e.updateSearchJSON("timestamp",t.format("YYYY-MM-DDTHH:mm:ss"))}})),l.a.createElement(d.h,null,l.a.createElement(J,{placeholder:t["filter_panel.filter.size"],min:1,max:50,onChange:function(t){return e.updateSearchJSON("limit",t)}})),l.a.createElement(d.h,null,l.a.createElement(J,{placeholder:t["filter_panel.filter.page"],min:0,onChange:function(t){return e.updateSearchJSON("offset",t)}}))))))),l.a.createElement(d.t,{className:"justify-content-center flex-grow-1"},l.a.createElement(d.h,null,l.a.createElement(k,{playlists:this.state.playlists})))),this.state.loading&&l.a.createElement(L,null),this.state.errorModal)}}]),t}(l.a.Component),G=Object(f.c)(Y);a(136);function Q(e){return l.a.createElement(d.i,{className:"h-100"},l.a.createElement(d.t,{className:"align-items-center h-100"},l.a.createElement(d.h,{xs:6,className:"mx-auto"},l.a.createElement(d.k,{className:"text-center "},l.a.createElement("h3",{className:"display-4"},"Spotifood"),l.a.createElement(d.b,{color:"primary",type:"submit",size:"lg",onClick:function(){return window.location="https://accounts.spotify.com/authorize?response_type=token&client_id=dc93f6595d574d0b8f8b35eba887e41d&redirect_uri=".concat("https://hashicode-spotifood.herokuapp.com/")}},"Login")))))}var W=function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=window.location.hash,t=A.a.parse(e),a=l.a.createElement(Q,null);return t.access_token&&(D.storeToken(t.access_token),a=l.a.createElement(G,null)),a}}]),t}(r.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(138);var q=a(56),F=a.n(q),H=a(57),$=a.n(H);Object(f.b)([].concat(Object(n.a)(F.a),[$.a]));var X=navigator.language||"en-US",Z={"pt-BR":{"filter_panel.title":"Busca de Playlists","filter_panel.filter.locale":"L\xedngua","filter_panel.filter.country":"Pa\xeds","filter_panel.filter.date":"Data e hor\xe1rio","filter_panel.filter.size":"Quantidade (1-50)","filter_panel.filter.page":"P\xe1gina","error_modal.title":"Erro","error_modal.errorRequest":"Ocorreu um erro ao obter as playlists. Por favor fa\xe7a o login novamente.","error_modal.expireToken":"Sess\xe3o expirou. Por favor fa\xe7a o login novamente.","playlist_result.empty":"Nenhuma playlist foi encontrada."},"en-US":{"filter_panel.title":"Playlist Search","filter_panel.filter.locale":"Locale","filter_panel.filter.country":"Country","filter_panel.filter.date":"Date","filter_panel.filter.size":"Limit (1-50)","filter_panel.filter.page":"Page","error_modal.title":"Error","error_modal.errorRequest":"There was an error fetching playlists. Please login again.","error_modal.expireToken":"Expired session. Please login again.","playlist_result.empty":"No playlist were found."}}[X];i.a.render(l.a.createElement(f.a,{locale:X,messages:Z},l.a.createElement(W,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},44:function(e,t){},61:function(e,t,a){e.exports=a(140)},66:function(e,t,a){},68:function(e,t,a){e.exports=a.p+"static/media/logo.5d5d9eef.svg"},69:function(e,t,a){},78:function(e,t){},84:function(e,t){}},[[61,2,1]]]);
//# sourceMappingURL=main.df3c7dd3.chunk.js.map