(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{138:function(e,t,a){},140:function(e,t,a){},149:function(e,t,a){},153:function(e,t,a){"use strict";a.r(t);var n=a(65),r=a(1),o=a.n(r),i=a(10),l=a.n(i),c=(a(72),a(5)),s=a(6),u=a(8),p=a(7),h=a(9),m=(a(74),a(75),a(11)),f=a(12),d=a(3),v=a(34),g=a.n(v),b=a(24),y=a.n(b),O=new(function(){function e(){Object(c.a)(this,e)}return Object(s.a)(e,[{key:"getPlaylists",value:function(e,t){var a=this.buildQueryParameters(e);return g.a.get("https://api.spotify.com/v1/browse/featured-playlists?".concat(a),{headers:{Authorization:"Bearer ".concat(t)}}).then(function(e){return e.data})}},{key:"buildQueryParameters",value:function(e){return y.a.stringify(e)}},{key:"getFilters",value:function(){return g.a.get("https://www.mocky.io/v2/5a25fade2e0000213aa90776").then(function(e){return e.data})}}]),e}()),j=a(25),E=a.n(j),k=a(66),C=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(u.a)(this,Object(p.a)(t).call(this,e))).state={value:void 0},a.onChangeValue=a.onChangeValue.bind(Object(m.a)(Object(m.a)(a))),a}return Object(h.a)(t,e),Object(s.a)(t,[{key:"getOptionLabel",value:function(e){return e.name}},{key:"getOptionValue",value:function(e){return e.value}},{key:"onChangeValue",value:function(e){var t=e?e.value:void 0;this.setState({value:t}),this.props.onChange(t)}},{key:"render",value:function(){return o.a.createElement(k.a,{getOptionLabel:this.getOptionLabel,getOptionValue:this.getOptionValue,options:this.props.options,isMulti:!1,placeholder:this.props.placeholder,onChange:this.onChangeValue,value:this.props.value,isClearable:!0})}}]),t}(o.a.Component),S=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(u.a)(this,Object(p.a)(t).call(this,e))).state={value:""},a.onChange=a.onChange.bind(Object(m.a)(Object(m.a)(a))),a}return Object(h.a)(t,e),Object(s.a)(t,[{key:"onChange",value:function(e){var t=e.target.value;(!t||this.props.min&&t<this.props.min||this.props.max&&t>this.props.max)&&(t=""),this.setState({value:t}),t?this.props.onChange(t):this.props.onChange(void 0)}},{key:"render",value:function(){return o.a.createElement(d.j,{type:"number",placeholder:this.props.placeholder,onChange:this.onChange,value:this.state.value})}}]),t}(o.a.Component),w=a(59),N=a.n(w),x=a(21),P=a.n(x),T=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(u.a)(this,Object(p.a)(t).call(this,e))).onChange=a.onChange.bind(Object(m.a)(Object(m.a)(a))),a}return Object(h.a)(t,e),Object(s.a)(t,[{key:"onChange",value:function(e){console.log(e),e instanceof P.a?this.props.onChange(e.format(this.props.pattern)):e||this.props.onChange(void 0)}},{key:"render",value:function(){return o.a.createElement(N.a,{closeOnSelect:!0,placeholder:this.props.placeholder,onChange:this.onChange,inputProps:this.props.inputProps})}}]),t}(o.a.Component),I=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(u.a)(this,Object(p.a)(t).call(this,e))).state={filters:void 0},a}return Object(h.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=this;O.getFilters().then(function(t){e.setState({filters:t.filters})})}},{key:"createFilter",value:function(e){var t,a=this,n={placeholder:e.name,onChange:function(t){return a.props.updateSearchJSON(e.id,t)},key:e.id};if(e.values)t=o.a.createElement(C,Object.assign({},n,{options:e.values}));else if(e.validation){var r=e.validation,i=r.primitiveType;switch(i){case"INTEGER":r.min&&(n.min=r.min),r.max&&(n.max=r.max),t=o.a.createElement(S,n);break;case"STRING":n.inputProps={placeholder:e.name},n.pattern=r.pattern.replace("yyyy","YYYY").replace("dd","DD"),t=o.a.createElement(T,n);break;default:console.log("Unknow type ".concat(i))}}return t}},{key:"render",value:function(){var e=this,t=this.props.intl.messages,a=E.a.map(this.state.filters,function(t){var a=e.createFilter(t);return o.a.createElement(d.h,{key:t.id},a)});return o.a.createElement(d.c,{className:"mt-2 mx-2"},o.a.createElement(d.e,null,t["filter_panel.title"]),o.a.createElement(d.d,null,o.a.createElement(d.i,null,o.a.createElement(d.t,null,a))))}}]),t}(o.a.Component),J=Object(f.c)(I),z=a(60),L=function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return o.a.createElement(d.c,{className:"mx-1 my-1"},o.a.createElement(d.f,{top:!0,width:"100%",src:this.props.photo.src}),o.a.createElement(d.d,null,o.a.createElement(d.g,null,this.props.photo.albumName)))}}]),t}(o.a.Component),M=a(26),V=a(15),_=function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props.playlists,t=this.props.intl.messages;return o.a.createElement("div",null,e&&e.length>0?o.a.createElement(z.a,{photos:e,ImageComponent:L}):o.a.createElement(d.a,{color:"secondary",className:"mx-5 mt-5"},o.a.createElement(V.a,{icon:M.faInfoCircle})," ",t["playlist_result.empty"]))}}]),t}(o.a.Component),D=Object(f.c)(_),B=a(27);function G(e){return o.a.createElement(d.r,{color:"primary",dark:!0,expand:"md"},o.a.createElement(d.s,{href:"#"},"Spotifood"),o.a.createElement(d.o,{className:"ml-auto",navbar:!0},o.a.createElement(d.p,null,o.a.createElement(d.q,{href:"https://github.com/hashiCode/ifood-frontend-test"},o.a.createElement(V.a,{icon:B.faGithub,size:"lg"})))))}a(136);var F=new(function(){function e(){Object(c.a)(this,e),this.tokenKey="auth_token"}return Object(s.a)(e,[{key:"storeToken",value:function(e){localStorage.setItem(this.tokenKey,e)}},{key:"getToken",value:function(){return localStorage.getItem(this.tokenKey)}},{key:"removeToken",value:function(){localStorage.removeItem(this.tokenKey)}}]),e}());a(138);function K(){return o.a.createElement("div",{className:"pageSpinner"},o.a.createElement(V.a,{className:"pageSpinnerIcon",icon:M.faSpinner,size:"3x",spin:!0}))}a(140);var R=function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props.intl.messages;return o.a.createElement(d.l,{isOpen:!0},o.a.createElement(d.n,{className:"error-modal-header"},e["error_modal.title"]),o.a.createElement(d.m,null,this.props.errorMSG))}}]),t}(o.a.Component),U=Object(f.c)(R),Y=a(39),Q=(a(147),function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(u.a)(this,Object(p.a)(t).call(this,e))).state={searchJSON:{locale:void 0,country:void 0,timestamp:void 0,limit:void 0,offset:void 0},playlists:void 0,loading:!1,validToken:!0,errorModal:void 0},a.updateSearchJSON=a.updateSearchJSON.bind(Object(m.a)(Object(m.a)(a))),a.fecthPlaylists=a.fecthPlaylists.bind(Object(m.a)(Object(m.a)(a))),a}return Object(h.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=this;window.history.pushState(null,"","/"),this.refreshPlaylists=setInterval(function(){return e.fecthPlaylists()},3e4),this.fecthPlaylists()}},{key:"componentWillUnmount",value:function(){clearInterval(this.refreshPlaylists),F.removeToken()}},{key:"updateSearchJSON",value:function(e,t){var a=this.state.searchJSON;a[e]=t,this.setState({searchJSON:a}),console.log(this.state.searchJSON),this.fecthPlaylists()}},{key:"createErrorModal",value:function(e){var t=this.props.intl.messages;return o.a.createElement(U,{errorMSG:t[e]})}},{key:"fecthPlaylists",value:function(){var e=this,t=F.getToken();if(t&&this.state.validToken)this.setState({loading:!0}),O.getPlaylists(this.state.searchJSON,t).then(function(t){var a=t.playlists;if(a&&a.items){var n=e.processPlaylist(a.items);e.setState({playlists:n,loading:!1})}}).catch(function(t){if(400==t.response.status)Y.toast.error(t.response.data.error.message),e.setState({loading:!1});else{var a=e.createErrorModal("error_modal.errorRequest");e.setState({loading:!1,validToken:!1,errorModal:a}),clearInterval(e.refreshPlaylists)}});else{var a=this.createErrorModal("error_modal.expireToken");this.setState({validToken:!1,errorModal:a}),clearInterval(this.refreshPlaylists)}}},{key:"processPlaylist",value:function(e){var t=[];return E.a.forEach(e,function(e){t.push({src:e.images[0].url,albumName:e.name,width:300,height:300})}),t}},{key:"render",value:function(){return o.a.createElement("div",null,o.a.createElement(G,null),o.a.createElement(d.i,{fluid:!0},o.a.createElement(d.t,null,o.a.createElement(d.h,null,o.a.createElement(J,{updateSearchJSON:this.updateSearchJSON}))),o.a.createElement(d.t,{className:"justify-content-center flex-grow-1"},o.a.createElement(d.h,null,o.a.createElement(D,{playlists:this.state.playlists})))),this.state.loading&&o.a.createElement(K,null),this.state.errorModal,o.a.createElement(Y.ToastContainer,null))}}]),t}(o.a.Component)),W=Object(f.c)(Q);a(149);var q=Object(f.c)(function(e){var t=e.intl.messages;return o.a.createElement(d.i,{className:"h-100"},o.a.createElement(d.t,{className:"align-items-center h-100"},o.a.createElement(d.h,{xs:8,className:"mx-auto"},o.a.createElement(d.k,{className:"text-center justify-content-center"},o.a.createElement("h1",{className:"display-4 mb-5"},"Spotifood"),o.a.createElement(d.b,{color:"primary",type:"submit",size:"lg",onClick:function(){return window.location="https://accounts.spotify.com/authorize?response_type=token&client_id=dc93f6595d574d0b8f8b35eba887e41d&redirect_uri=".concat("https://hashicode-spotifood.herokuapp.com/")}},o.a.createElement(V.a,{icon:B.faSpotify,size:"lg"})," ",t["login.button"])))))}),A=function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=window.location.hash,t=y.a.parse(e),a=o.a.createElement(q,null);return t.access_token&&(F.storeToken(t.access_token),a=o.a.createElement(W,null)),a}}]),t}(r.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(151);var $=a(62),H=a.n($),X=a(63),Z=a.n(X);Object(f.b)([].concat(Object(n.a)(H.a),[Z.a]));var ee=navigator.language||"en-US",te={"pt-BR":{"login.button":"Login","filter_panel.title":"Busca de Playlists","filter_panel.filter.locale":"L\xedngua","filter_panel.filter.country":"Pa\xeds","filter_panel.filter.date":"Data e hor\xe1rio","filter_panel.filter.size":"Quantidade (1-50)","filter_panel.filter.page":"P\xe1gina","error_modal.title":"Erro","error_modal.errorRequest":"Ocorreu um erro ao obter as playlists. Por favor fa\xe7a o login novamente.","error_modal.expireToken":"Sess\xe3o expirou. Por favor fa\xe7a o login novamente.","playlist_result.empty":"Nenhuma playlist foi encontrada."},"en-US":{"login.button":"Login","filter_panel.title":"Playlist Search","filter_panel.filter.locale":"Locale","filter_panel.filter.country":"Country","filter_panel.filter.date":"Date","filter_panel.filter.size":"Limit (1-50)","filter_panel.filter.page":"Page","error_modal.title":"Error","error_modal.errorRequest":"There was an error fetching playlists. Please login again.","error_modal.expireToken":"Expired session. Please login again.","playlist_result.empty":"No playlist were found."}}[ee];l.a.render(o.a.createElement(f.a,{locale:ee,messages:te},o.a.createElement(A,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},53:function(e,t){},67:function(e,t,a){e.exports=a(153)},72:function(e,t,a){},74:function(e,t,a){e.exports=a.p+"static/media/logo.5d5d9eef.svg"},75:function(e,t,a){},84:function(e,t){},90:function(e,t){}},[[67,2,1]]]);
//# sourceMappingURL=main.e89c70d6.chunk.js.map